try {
  const res = await fetch('https://maanit-func.azurewebsites.net/api/login', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ email, password })
  });

  let data;
  try {
    const text = await res.text();
    data = text ? JSON.parse(text) : {};
  } catch {
    alert("Server returned an invalid response.");
    return;
  }

  if (!res.ok) {
    alert(data.error || "Login failed.");
  } else {
    alert(data.message || "Login successful!");
    // redirect if needed
  }
} catch (err) {
  console.error("Fetch error:", err);
  alert("Could not connect to the server.");
}
