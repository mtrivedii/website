<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hacker Leaderboard</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h1>ğŸ† Red Team Leaderboard</h1>
    <table>
      <thead>
        <tr><th>#</th><th>Username</th><th>Score</th></tr>
      </thead>
      <tbody id="scoreboard">
        <tr><td colspan="3">Loadingâ€¦</td></tr>
      </tbody>
    </table>
    <p><a class="button" href="index.html">â† Home</a></p>
  </div>

  <script>
    async function loadLeaderboard() {
      const tbody = document.getElementById('scoreboard');
      try {
        const res = await fetch('/api/scoreboard', {
          method: 'GET',
          credentials: 'include'    // â† include cookie even for anonymous-allowed
        });
        if (!res.ok) throw new Error(res.status);
        const data = await res.json();

        tbody.innerHTML = '';
        data.forEach((entry, i) => {
          const tr = document.createElement('tr');
          tr.innerHTML = `<td>${i+1}</td><td>${entry.username}</td><td>${entry.score}</td>`;
          tbody.appendChild(tr);
        });
      }
      catch (e) {
        console.error('Error loading scores:', e);
        tbody.innerHTML = `<tr><td colspan="3">Error loading scores.</td></tr>`;
      }
    }

    loadLeaderboard();
  </script>
</body>
</html>
